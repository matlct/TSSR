## Gestion des ressources

Dans un data Center les ressources disponibles vont être le cumul de toutes les ressources mises à disposition par les hôtes 2 virtualisations .Nous allons voir ici qu'il est possible de réserver des ressources pour des machines virtuelles . En effet , la quantité de mémoire vive et de CPU va pouvoir être limitée par un système de réservation . Ceci .Ce système de réservation va éviter d'avoir un phénomène de saturation par une machine virtuelle de la totalité des ressources . En effet , aujourd'hui , il est fréquent que certaines nations virtuelles soient victimes d'attaques . Une partie de ces attaques va consister à saturer les ressources d'une machine virtuelle afin de d'arrêter le service fourni par cette machine virtuelle .Sur une solution de virtualisation par défaut , les machines virtuelles n'ont aucune limite en termes de réservation de ressources , ce qui peut être problématique , une machine virtuelle peut absorber la totalité des ressources à disposition du data Centeret dans ce cas , les autres machines virtuelles n'auront plus de ressources de fonctionnement .Pour éviter cela , on va pouvoir employer des réservations les .Peuvent se faire sur 3 niveaux au niveau d'une masse une virtuelle et dans ce cas là nous allons réserver des ressources uniquement pour cette machine .On peut également créer des ensembles de ressources ou poules de ressources et .Classer des machines virtuelles danser poules de ressources nous allons voir à la suite .De l'utilisation d'un cluster Eh bien nous pouvons également réserver des ressources pour les machines hébergées à l'intérieur de cet oster .Un exemple ici où un août de virtualisation va réserver pour un ensemble ici l'ensemble VM prod dans lequel nous allons avoir 3 machines virtuelles et bien nous allons réserver une certaine quantité de RAM et une certaine quantité de CPU pour cet ensemble de .Actualisation un boule de ressources va être un objet logique cet objet peut être créé soit sur un hyperviseur autonome soit sur un data Center ce .De ressources va contenir des machines virtuelles dans notre exemple ici nous avons l'hôte autonome déterminée par son adresse IP 172 18 11 . 13 qui est lui même hébergé dans le data Center d'essai un et nous voyons que 2 poules de ressources ont été exagées le RPVM prod et le RPVM test c'est ?RP contiennent ensuite 2 machines virtuelles chacun nous avons dans le boulder source vous avez un prod W 12 décès en et W 2 8 2 - appli un et dans le RPVM test CMW 7 test un et CLXT test 2l'intérêt de l'emploi de ces poules de ressources va être la réservation des ressourcesici nous voyons dans le tableau sur la droite que le RPVM prod va réserver 8000 méga hertz au niveau du CPU donc où nous avons une garantie d'avoir à disposition au minimum 8000 méga hertz pour les 2 machines virtuelles situées dans le pôle RPVM prod et puis nous n'avons aucune limite nous pouvons donc employer la totalité des ressources CPU disponibles pour les machines virtuellesdu RPZ . À l'inverse le RPVM test n'a aucune réservation si la totalité des ressources sont employées dans l'autre poule de ressources et bien aucune mesure virtuelle ne pourrait être utilisée dans le RPVM testet également nous avons appliqué une limite à 2000 mégahertz pour le RPVM test ce qui veut dire que les 2 machines virtuelles ne pourront jamais employer plus de 2000 mégas. Cette configuration là va être faite afin d'éviter le phénomène de saturation des machines virtuelles . La configuration des poules permet de garantir la disponibilité des ressources pour les besoins cruciaux de l'entreprise .  

## vCenter et le concept de datacenter

Center est le concept de data Center nous allons parler dans les différents modules du V Center le V Center va permettre d'avoir une gestion globale de la totalité des ressources nécessaires à l'utilisation de la veste ferme .L'ajout d'un V Center a une infrastructure autonome , va se faire par la création , soit d'une machine virtuelle hébergée sur un hyperviseur autonome , soit pas la mise en place d'une influence cette appliance peut être également hébergée en tant que machine virtuelle où être hébergé sur une machine physique indépendante d'un hyperviseur .L'ajout du V Center va permettre de créer un nouvel objet que l'on appelle le data Center le .Le data Center va ensuite obligatoirement comporter des autres , ces hôtes sont les hôtes de virtualisation que nous avons déjà parlé précédemment .L'intérêt d'utiliser un data Center et de regrouper au sein d'une même entité , les éléments qui vont participer à la solution de virtualisation .Nous l'avons vu également précédent , les différents objets présents sur les autres vont être regroupés au même endroit . Il s'agit des objets réseaux .Vss et VDS , mais également des objets de stockage , les détestables, quel que soit le type de data Store .L'emploi du data Center va être obligatoire pour utiliser les fonctionnalités de déplacement de VM à chaud comme V motion ou de déplacement de stockage de VM Storage V motionet également le data Center et le prérequis indispensable pour l'utilisation de custars .L'utilisation des clusters est également un prérequis pour l'utilisation des fonctions des fonctionnalités de type achat ou folklance .Vincent est donc un élément indispensable à la mise en œuvre et au fonctionnement de ses services .Il est évidemment recommandé qu'il soit hébergé sur une machine virtuelle , hautement disponible . En effet , si le V Center n'est plus disponible et bien la totalité de ses fonctionnalités vont également être indisponibles .Il existe différentes versions et mode de notre V Center et évidemment , comme nous l'avions déjà vu une licence spécifique sera assignée à un récepteur spécifique .Dans les 2 implémentations possibles , nous retrouvons la clience VCSA cette .Lance ne pourront gérer que 5 au maximum .Le 5 août 2 virtualisation au maximum pour la playence V 16 .Machine virtuelle maximum courront également être gérés par le V 16 lesQuelles sont la simplicité les prérequis en en termes de mémoire vive seront faibles les ? Les inconvénients évidemment seront la limite du nombre d'autres pris en charge .Il est possible d'utiliser la version complète du V Center dans ce cas là , on parle du V Center serveur .C'est Rocky indispensable et l'utilisation d'un système Microsoft Windows Server en version 64 bits .Il y a également un prérequis mémoire important qui est de 96 gigabits de mémoire au minimum ?Grâce à ce V Center serveur , nous allons pouvoir gérer 1000 donc nous arrivons dans une catégorie beaucoup plus importante . Nous pouvons également encadrer 10000 verres .L'avantage évident est une capacité bien supérieure de la prise en charge des différents éléments . Mais l'inconvénient , évidemment , est le coût de mise en œuvre du fait des prérequis matériels et logiciels et évidemment le coût de licence va être beaucoup plus élevé .La mise en place d'un VCSA d'un . Ou d'un V Center serveur va nécessiter une phase de déploiement .Lors de la mise en place du VCSA , nous devons dans un premier temps accéder par le port 54 80 à partir d'un navigateur web. Le pauvre 54 80 restera le port d'administration d'u . VCSA .Lors du premier démarrage , le VCSA va nécessiter une configuration de base .Une fois cette configuration de base effectuée le VCSA va devenir disponible à partir du port 443 le port Https était .Il est également possible d'accéder à partir du corps 94 43 pour les versions antérieures à la version 6. En effet , dans ce cas là , une interface web à base de plugin flash Player est disponible .Elle est accessible à travers le port 94 43. Toutes les gestions du VCSA va se faire en HTTPS et l'administration du serveur qui l'héberge se fera en 5480 .  

## Les modeles de machines virtuelles

La topologie de type data Center va permettre une emploi de modèle de machine virtuelle en effet .En effet , parmi les fonctionnalités disponibles , un data Center va pouvoir créer des machines virtuelles toutes identiques à partir d'un modèle de référence .Il existe 2 types de modèles , le modèle de type OVF , qui est un standard parmi les solutions de virtualisation . En effet , un modèle OVF peut être utilisé sur des solutions de type poste de travail comme GMORE workstation . Mais également sur des solutions globales de type V sphère ou des solutions concurrentes comme Virtualbox .Les avantages de cette solution sont d'être transitives entre différentes plateformes .Il est possible d'importer une machine virtuelle à partir d'un OVF , mais également d'une machine virtuelle , d'exporter vers le format OVF. Dans quel cas nous allons trouver , Eh bien lors d'un partage de machines virtuelles, l'inconvénient du modèle OVF , c'est qu'il ne peut pas être reconnu comme un modèle de déploiement et on ne pourra pas automatiser le déploiement de machines virtuelles à partir de ce modèle . Toutes les actions de création devront passer par une chasse d'import manuelle pour le modèle OVF .À l'inverse , le modèle VMTX va être propriétaire 1 sphère . Un modèle VMTX devra être d'abord converti en OVF pour être employé sur d'autres solutions de virtualisation .Le modèle VMTX va permettre de cloner une machine virtuelle vers un modèle dupliquer une machine virtuelle vers un modèle , déployer une VM depuis ce modèle et enfin l'avantage principal de ce modèle VMTX est la possibilité de modification. En effet , par rapport à un modèle OVF qui va être statique , un modèle VMTX va pouvoir être modifié sans passer par un déploiement de machines virtuelles , une modification , puis un recommenage vers le temple . Les modèles VMTX vont pouvoir être modifiés à foi par la solution VSR .L'utilisation des VMTX va être des utilisations de base de modèles pour pouvoir créer rapidement des machines virtuelles identiques . Vous citez par exemple 1 de type serveur web ?La solution va se faire va pouvoir créer des machines virtuelles de manière automatique à base d'un modèle de serveur web en mode VMTX afin par exemple d'absorber une montée en charge ou une demande importante de machines virtuelles .En détail , les modèles VMTX sont des images de machines virtuelles qui vont permettre un déploiement optimisé .Qu'est ce qui est contenu dans ces VMTX ? Nous allons déclarer un système d'exploitation qui peut être de type Wii 12 ou de type Unix Linux . Nous avons également avoir une collection de pilotes , ces pilotes vont être nécessaires par rapport à l'août de virtualisation qui va faire fonctionner les massines virtuelles déterminées à partir du modèle VMTX . Nous allons pouvoir ajouter des applications . Nous allons également pouvoir au besoinrajouter des correctifs ou des mises à jour au modèle VMTX .Chaque modèle est généralement personnalisé pour une utilisation adaptée au contexte de l'entreprise . Ces modèles VMTX vont pouvoir être gérés directement depuis l'interface d'administration V moins RV 7. Les possibilités pour générer un modèle VMTX vont être soit une conversion directe d'une machine virtuelle en modèle VNTX et dans ce cas là on parlera de création de master . En effet , nous allons installer une machine virtuelle dite de référence . La personnalisée par l'installation d'applications , la mise à jour de pilote et dans lequel notamment d'une machine Windows , la mise en place de ce qu'on appelle le 6 prêt . Le 6 prep qui va permettre à toutes les machines virtuelles et générer à partir du modèled'avoir un identifiant SAID unique .Une fois la conversion de la VM en modèle , il est possible à l'inverse de reprendre un modèle et de le reconvertir en machine virtuelle . Dans ce cas là , Eh bien ça peut être pour une mise à jour de cette machine virtuelle . La suppression ou l'ajout d'applications . Une fois les mises à jour effectuées , on reprend le chemin inverse , reconversion 2 vers le modèle .Il est également possible de faire des clowns de machines berthelées . Dans ce cas là on ne perd pas la massine virtuelle de de de référence , mais on la clone cuit ou génère un modèle à partir de ce clown .Il est possible de faire la même chose à partir d'un modèle , on peut déployer un nouveau modèle à partir d'un modèle existant , puis effectuer un clone vers une machine virtuelle le .Le modèle VMTX apporte beaucoup plus de souplesse que les modèles OVF si l'on souhaite personnaliser un modèle VMTX . Dans ce cas là , il faut un passé par du Rhône hommage et on pourra vous renommer la machine virtuelle avant de la convertir en modèle . Attention à l'adresse AJP , il est conseillé de laisser un adresse à JP automatique pour éviter que les machines virtuelles générées à partir des modèles aient une adresse IP identique . Et comme nous l'avons vu précédemment , la régénérationde l'identifiant unique de sécurité , le SID doit être faite pour les machines Windows. Dans ce cas là , le prérequis avant la Constitution du VMTX sera de faire 6 sprp et lors de la génération d'une nouvelle VM à partir du modèle VMTX , le 6 premier redéfinira à nouveau SAID unique . Les étapes pour mettre en place 1 la première est de créer une machine virtuelle de référence dite masterinstaller les outils d'intégration , le type VL tous puis convertir la machine virtuelle en modèle .Nous voyons ici un aperçu de l'interface d'administration du modèle VMTX . Nous choisissons donc par exemple un dossier ici le dossier XP , puis à l'intérieur , nous allons voir les différentes fonctionnalités . Nous avons donc le nom de l'ordinateur , la licence Windows , le mot de passe admin le ciseau ouvert le nombre d'exécutions du modèle VMTX , la configuration réseau , l'intégration au groupe de travail ou du domaine, les différentes options , la sauvegarde et enfin la fonction pré interminée indique que nous allons pouvoir convertir la machine virtuelle en modèle VMTX . Tous ces paramètres que nous allons pouvoir gérer manuellement vont permettre d'avoir ensuite un déploiement de machines virtuelles totalement automatisées .  

## Modeles OVF

Nous avons vu précédemment que les modèles pouvaient être notés VMTX mais également de type OVF la différence majeure entre les modèles VMTX est OVF sont leur compatibilité en effet le VMTX reste un modèle très spécifique qui contient beaucoup de paramètres mais qui reste propre à la solution de virtualisation visuelle il ?Modèle le modèle OVF qui a la différence du VMTX va être employé sur toutes les plateformes de virtualisationOVF veut dire open virtual machine format c'est un format standard il va faciliter les importations et exportations de machines virtuelles sur les plates formes ?Les fichiers modèles générés vous contenir le fichier de configuration de la machine virtuelle ainsi que le ou les fichiers de type disque dur .Si ces fichiers de type disque dur proviennent d'une solution V moins le format sera VMDK .Les plateformes qui prennent en charge les modèles OVF vont être prouvés moins RVMR Player workstation et vais sphère les solutions de virtualisation de type poste de travail Virtual box ex serveur et les ?Et les outils permettant le rapport pour y perver seront Q ému sur l'hyperviseur KVEn résumé , l'o VF peut servir de valises ou de cartons de transport des différents éléments nécessaires à une machine virtuelle .  

## Utilisateurs et privilèges

Dans une veste vert il y a un nombre important de fonctionnalités et également un nombre très important d'objets chaque objet comme nous l'avons vu précédemment va nécessiter des compétences techniques différentes nous pouvons citer les objets réseaux ou les objets de stockage .Pour être administré correctement un nombre important d'intervenants va être nécessaire en fonction des capacités de chaque personnepour pouvoir gérer les accès à ces fonctionnalités .La solution vient se faire va permettre de gérer des privilèges en fonction d'utilisateurs et de regrouper ses utilisateurs dans des groupes d'administration en .Peut être important de restreindre les privilèges d'accès à certains utilisateurs .Pour éviter que des accès non autorisés soient effectués sur des objets critiques , par exemple , il faut éviter qu'à qu'une personne puisse éteindre une machine virtuelle . Eh bien , nous allons créer des rôles et ces rôles , nous allons les attribuer à des groupes d'utilisateurs .La gestion des utilisateurs peut se faire à 2 niveaux . Il est possible de gérer les utilisateurs d'un autre de virtualisation , un nœud SXXI et dans ce cas là , nous gérons les droits sur chaque hyperviseur . Il est également possible de gérer les droits de manière globale à partir du V Center .Dans le cas du V Center , il est important de spécifier que un concept de domaine sera très utile pour pouvoir gérer de manière globale les utilisateurs .En effet , le . Le Center va rechercher dans la base de données du domaine . La liste des utilisateurs ainsi que la liste des groupes et leur appartenance au sein de ses propres groupes. Grâce à ce lien avec le contrôleur de domaine , les rôles vont pouvoir être associés à des groupes de sécurité déjà présents dans l'actif directory .Nous pouvons prendre par exemple un groupe nommé support dans l'actif directory , ce groupe ne met support va correspondre au rôle support de machine virtuelle présent dans vescefer . La méthodologie pour affecter un utilisateur va être dans un premier temps de créer cet utilisateur .Puis de créer les groupes et d'affecter les utilisateurs , c'est groupe. Enfin de créer des rôles ou d'affecter les privilèges des utilisateurs assez roubles spécifiques .Enfin , une fois les rôles déterminés et les utilisateurs associés à ces rôles , nous allons lier ces rôles à des objets de notre data Center , ces objets peuvent être unhyperviseur , un élément de l'hyperviseur comme 1 switch , un data Store .U des éléments spécifiques comme l'arrêt d'une machine virtuelle , le clonage du machine virtuel , l'utilisation de modèles . Il faut bien comprendre que dans une vie sphère , tous les éléments sont des objets et sur chacun de ces objets , il va être possible pour un rôle précis de gérer les droits .Des droits de création , de modifications , de suppressions , mais également des actions comme la mise en veille , le déplacement , le changement d'hyperviseur . Tous ces droits vont pouvoir être répartis dans des rôles différents , associés à des groupes ou à des utilisateurs différents .Quelques bonnes pratiques , il est préférable d'utiliser des groupes plutôt que des utilisateurs . En effet , une veste va être soumis à évolution . Et dans ce cas là , il est beaucoup plus facile d'ajouter des nouveaux utilisateurs à des groupes déjà existants. Il faut éviter d'affecter trop de privilèges à des utilisateurs qui n'en bénéficient , qui n'en nécessitent pas , pardon , c'est .Je m'offre plus de privilèges nécessaires il peut être dupliqué ou modifié un rôle peut servir de base vers un rôle dupliqué qui contiendra moins de privilèges ?Il est important de définir des règles à l'avance sur chaque élément en partant du plus haut niveau en effet les éléments de haut niveau comme les clusters les datacenters levacenter vont ensuite par héritage propager les droits vers les éléments de niveau inférieur .Résumé il est important de bien définir le rôle de chaque utilisateur dans la vraie sphère afin d'éviter les risques d'arrêt de production ou la suppression d'objets critiques .  

## Déplacement de VM
Précédemment nous avons vu qu'il existait des fonctionnalités avancées dans la virtualisation du cerveau alors oui c'est fonctionnalité il y a la possibilité de déplacer une machine virtuelle d'un hyperviseur vers un autre hyperviseur sans avoir besoin d'arrêter le fonctionnement de cette machine virtuelle .Nous résumons le fonctionnement d'une machine virtuelle elle nécessite un ensemble de ressources 0 . Ces ressources vont être soit directement hébergées sur l'hôte de virtualisation . C'est le cas des ressources type CPU RAM et réseau soient .Vont être hébergés sur des solutions indépendantes à un autre 2 virtualisation c'est le cas par exemple pour le stockage lorsqu'on utilise des solutions de stockage de type San la fonction de déplacement de machines virtuelles va voir comme pré requis le fait que son stockage ne soit plus dépendant d'un hôte du data Centeren effet si une machine virtuelle est stockée sur un de ces hôtes lors du déplacement il faut également déplacer la totalité du stockage pendant .Ce déplacement de stockage aucune écriture de fichier ne serait possible et nous serions obligés d'éteindre la machine virtuelle .Le premier prérequis va être de déporter le stockage de cette machine virtuelle vers une solution autonome .Concernant les autres ressources , RAM et CPU , c'est ressources vont être identiques sur l'hyperviseur , vers lequel nous allons nous déplacer donc .Nous pouvons facilement déplacer la machine virtuelle à condition que les ressources CPURM soient suffisantes et disponibles sur l'hyperviseur de destination .Concernant l'accès au réseau , nous avons vu dans le module concernant le réseau qu'il était possible d'avoir une fonctionnalité réseau qui ne dépendait pas d'un hyperviseur . Cette fonctionnalité est le VDS pour virtuel distributate switch .Pour résumer la configuration nécessaire , la médecine virtuelle ne doit plus dépendre pour sans stockage ni son accès au réseau . Dan hyperviseur .Un autre prérequis va être nécessaire , c'est la fonctionnalité dite Vemotion . Ça ne fonctionnalité , nous l'avons aperçu lors de la création de VSS de V switch standard . En effet , cette fonctionnalité doit être présente sur un vais switch standard. Dans le cadre du déplacement d'une machine virtuelle , la totalité des fichiers de configuration va être déplacée par un réseau dédié . Il est important que ce réseau est de très bonnes performances pour limiter le temps de déplacement de la machine virtuelle .La fonction storage émotionne va permettre de déplacer à chaud le stockage de la machine virtuelle d'une VM d'un dot Store vers un autre data Store .Il est possible d'effectuer les 2 actions simultanément . Déplacement du stockage de la VM d'un data Store vers un autre data Store sans arrêt de la machine virtuelle et également déplacement difficile de configuration de la machine virtuelle d'un interviseur vers un autre hyperviseur sans arrêt de celle ci, les prérequis vont être que les 2 hyperviseurs doivent être capables de communiquer sur un réseau dédié le réseau de type V motion .

## vMotion et Storage vMotion

La mise en place de la fonctionnalité V motion historique V motion la nécessité que l'ensemble du data Center soit adapté pour pouvoir effectuer des déplacements manuels de machines virtuelles .En effet , le premier prérotive est la fonctionnalité V motion . Cette fonctionnalité se trouve dans un groupement de porcs de type VM Carell , regroupement de port de type VM carnel doit être présent sur un V switchet ce V switch doit pouvoir communiquer sur le réseau Glemmush . Ce réseau GMOtion doit être lié à une carte réseau physique et tous les hyperviseurs participants à la fonction V motion doivent être en capacité de communiquer sur ce réseau VMH . Il est .Il est important de sélectionner une adresse JP propre au réseau GV motion . Il est également important d'utiliser un système de commutation de grandes capacités . En effet , il faut limiter au maximum les durées de déplacement de machines virtuelles .L'emplacement de stockage des machines virtuelles doit également être accessible à tous les autres participants au déplacement de la machine virtuelle . Il est nécessaire d'employer un système de type Sun ou de type NAS . Les data Store de stockage des machines virtuelles doivent être disponibles et accessibles sur tous les autres du data Center .Lors d'un déplacement , on peut choisir de déplacer une VM vers un autre route ou de déplacer le stockage de la VM d'un data Store vers un autre data Store . Dans ce cas là la sanction sera la fonction storage V motion .Pour éviter les problèmes de déplacement de VLM , il y conseille de supprimer tous les périphériques de type images où donc lecteur DVD ou lecteur disquette ou carte graphique spécifique . En effet , il ne faut garder aucun périphérique lié à un autre spécifique il .Moi la particularité du CPU lorsque 2 ordres de virtualisation ont 1 de constructeur différents ça n'est pas une limitation technique car la veste est capable d'adapter en temps réel la topologie mais salon les types de processeurs des écarts de performance importants peuvent apparaître .

